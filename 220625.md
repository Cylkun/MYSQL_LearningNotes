# 220625 DAY 34

## 自定义变量

自定义变量: 变量是用户自定义的, 不是由系统提供的

使用步骤: 

1. 声明
2. 赋值
3. 使用: 查看, 比较, 运算, ...

### 用户变量

作用域: 针对于当前会话 (连接) 有效, 同于会话变量的作用域
应用在任何地方, `BEGIN ... END` 的里面或外面

声明并初始化

```sql
SET @用户变量名 = 值;
SET @用户变量名 := 值;
SELECT @用户变量名 := 值;
```

赋值

```sql
-- 方式一
SET @用户变量名 = 值;
SET @用户变量名 := 值;
SELECT @用户变量名 := 值;

-- 方式二
SELECT 值 (函数) INTO @变量名
FROM 表;
```


### 局部变量

作用域: 仅仅在定义它的 `BEGIN ... END` 中有效
==注意: 应用在 `BEGIN ... END` 中的第一句话==

声明

```sql
DECLARE 局部变量名 类型;
DECLARE 局部变量名 类型 DEFAULT 值;
```

赋值

```sql
-- 方式一
SET 局部变量名 = 值;
SET 局部变量名 := 值;
SELECT @局部变量名 := 值;

-- 方式二
SELECT 值 INTO 局部变量名
FROM 表;
```


### 用户变量 || 局部变量

|                  | 用户变量                     | 局部变量                                         |
| ---------------- | ---------------------------- | ------------------------------------------------ |
| 作用域           | 当前会话                     | `BEGIN ... END`中                                |
| 定义和使用的位置 | 会话的任何地方               | `BEGIN ... END`中的第一句话                      |
| 声明的语法       | 必须加 `@`<br />不用限定类型 | 只有使用 `SELECT` 时需要加 `@`<br />需要限定类型 |


### 案例

#### 用户变量

```sql
-- 用户变量
-- 声明两个变量并赋初始值, 求和, 打印
SET @m = 1;
SET @n = 2;
SET @sum = @m + @n;
SELECT @sum;
```





---
153
154
